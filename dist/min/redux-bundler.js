import{h,render}from"preact";import{loadSubApp}from"subapp-web";import{Provider}from"redux-bundler-preact";import{setStoreContainer,getReduxCreateStore}from"./shared";setStoreContainer("undefined"==typeof window?global:window);export function reduxRenderStart(a){var b,c=a.store,d=a.Component,e=a.element;return e?render(h(Provider,{store:c},h(d,null)),e):b=h(Provider,{store:c},h(d,null)),{store:c,component:b}}export function reduxBundlerLoadSubApp(a){var b=function(a,b){var c=this.info.StartComponent||this.info.Component,d=reduxRenderStart({store:a._store,Component:c,element:b}),e=d.component;return e},c=function(a){var b=a._prepared||a.initialState,c=a.reduxCreateStore||this.info.reduxCreateStore;return a._store=a._store||c(b),a},d=function(a){var b=this,c=a._store;return c.realize&&(a._store=c.realize()),Promise.resolve().then(function(){if(b.info.reduxStoreReady)return b.info.reduxStoreReady({store:a._store})}).then(function(){return a})},e=a.reduxBundles||a.bundles,f={reduxBundles:e,__preRender:c,__signalReady:d,__redux:!0};return a.reduxCreateStore||(f._genReduxCreateStore="subapp",f.reduxCreateStore=getReduxCreateStore(a)),loadSubApp(Object.assign(f,a),b)}