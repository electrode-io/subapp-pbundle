import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import{composeBundlesRaw}from"redux-bundler";var shared={};function setStoreContainer(a){shared=a}function setSharedStore(a,b){(b||shared).store=a}function getSharedStore(a){return(a||shared).store}function clearSharedStore(a){setSharedStore(null,a)}function createDeferStore(a,b,c){var d={bundles:a,initialState:b};return d.realize=function(){var a=d.real;return a||(d.real=a=composeBundlesRaw.apply(void 0,d.bundles)(d.initialState),setSharedStore(a,c)),a},d}function getReduxCreateStore(a){var b=a.reduxBundles||[];return function(a,c){var d=getSharedStore(c);if(!d)d=createDeferStore(b,a||{},c),setSharedStore(d,c);else if(d.realize)b.forEach(function(a){0>d.bundles.indexOf(a)&&d.bundles.push(a)}),Object.assign(d.initialState,a);else{var e,f=Object.values(d.meta.chunks[0].rawBundles),g=b.filter(function(a){return 0>f.indexOf(a)});(e=d).integrateBundles.apply(e,_toConsumableArray(g))}return d}}export{setStoreContainer,getReduxCreateStore,getSharedStore,setSharedStore,clearSharedStore};